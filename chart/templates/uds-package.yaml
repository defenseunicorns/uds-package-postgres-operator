apiVersion: uds.dev/v1alpha1
kind: Package
metadata:
  name: postgres-operator
  namespace: {{ .Release.Namespace }}
spec:
  network:
    expose:
    # Template these out to allow for overrides
      - service: pg-cluster-headless
        podLabels:
          cluster-name: pg-cluster
        host: postgres
        gateway: tenant
        port: 5432
        targetPort: 5432
    allow:
      - direction: Ingress
        remoteGenerated: IntraNamespace
      - direction: Ingress
        selector:
          cluster-name: pg-cluster
        remoteGenerated: Anywhere