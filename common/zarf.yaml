kind: ZarfPackageConfig
metadata:
  name: uds-core-metrics-server-common
  description: "UDS Metrics Server Common"
  url: https://github.com/kubernetes-sigs/metrics-server

components:
  - name: postgres-operator
    required: true
    charts:
      # - name: uds-postgres-operator-config
      #   namespace: postgres-operator
      #   version: 0.1.0
      #   localPath: ../chart
      - name: postgres-operator
        version: v1.10.1
        namespace: postgres-operator
        url: https://opensource.zalando.com/postgres-operator/charts/postgres-operator
        valuesFiles:
          - ../values/values.yaml
    actions:
      onDeploy:
        after:
          - description: Postgres Operator to be Healthy
            maxTotalSeconds: 90
            wait:
              cluster:
                kind: pod
                name: app.kubernetes.io/name=postgres-operator
                namespace: postgres-operator
                condition: Ready
